{"version":3,"sources":["webpack:///webpack/bootstrap d82f526aeaa097eb20d9","webpack:///./js/http-promise.js","webpack:///./js/farmer.js"],"names":["get","url","dataType","Promise","resolve","reject","$","ajax","type","async","statusCode","response","Error","error","jqXHR","status","console","log","getXMLHttpRequest","request","XMLHttpRequest","onreadystatechange","readyState","DONE","open","send","HttpClient","callback","responseText","http","getLocal","zip","getDetail","id","getAll","marketData","data","i","length","market","then","printData","text","JSON","stringify","document","getElementById","innerHTML","test","catch","err"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d82f526aeaa097eb20d9","// Implementation with jQuery\nexport const get = function(url, dataType='text') {\n    // return new pending promise\n    return new Promise((resolve, reject) => {\n        $.ajax({\n            url: url,\n            type: 'GET',\n            dataType: dataType,\n            async: true,\n            statusCode: {\n                404: (response) => {\n                    reject(new Error('404 error - response: ' + response));\n                },\n                200: (response) => {\n                    resolve(response);\n                }\n            },\n            error: (jqXHR, status, error) => {\n                console.log(status);\n                console.log(error);\n                reject(new Error('Failed to load the thing - status ' + status));\n            }\n        });\n    });\n};\n\n/*\n// Implementation with Node's http libraries\nexport const getNodeStyle = function(url) {\n    // return new pending promise\n    return new Promise((resolve, reject) => {\n        // select http or https module, depending on reqested url\n        const lib = url.startsWith('https') ? require('https') : require('http');\n        const request = lib.get(url, (response) => {\n            // handle http errors\n            if (response.statusCode < 200 || response.statusCode > 299) {\n                reject(new Error('Failed to load page, status code: ' + response.statusCode));\n            }\n            // temporary data holder\n            const body = [];\n            // on every content chunk, push it to the data array\n            response.on('data', (chunk) => body.push(chunk));\n            // we are done, resolve promise with those joined chunks\n            response.on('end', () => resolve(body.join('')));\n        });\n        // handle connection errors of the request\n        request.on('error', (err) => reject(err))\n    })\n};\n*/\n\n// Implementation with XMLHttpRequest\nexport const getXMLHttpRequest = function(url) {\n    // return new pending promise\n    return new Promise((resolve, reject) => {\n        const request = new XMLHttpRequest();\n        request.onreadystatechange = () => {\n            if (request.readyState == XMLHttpRequest.DONE && request.status == 200) {\n                resolve(request.response);\n            } else if (request.readyState == XMLHttpRequest.DONE &&\n                       (request.status < 200 || request.status > 299)) {\n                reject(new Error('Failed to load page - status: ' + request.status));\n            }\n        };\n        request.open('GET', url);\n        request.send(null);\n    })\n};\n\n\n\nvar HttpClient = function() {\n    this.get = function(url, callback) {\n        let request = new XMLHttpRequest();\n        request.onreadystatechange = function() {\n            if (request.readyState == 4 && request.status == 200) {\n                callback(request.responseText);\n            } else {\n                console.log('--------- Error! ---------');\n                console.log(request);\n            }\n        }\n        request.open('GET', url, true);\n        request.send(null);\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/http-promise.js","import * as http from './http-promise';\n\nfunction getLocal(zip, callback) {\n    const url = \"http://search.ams.usda.gov/farmersmarkets/v1/data.svc/zipSearch?zip=\"\n    return http.get(url + zip, 'json');\n}\n\nfunction getDetail(id) {\n    const url = \"http://search.ams.usda.gov/farmersmarkets/v1/data.svc/mktDetail?id=\";\n    return http.get(url + id, 'json');\n}\n\nfunction getAll(marketData) {\n    let data = marketData['results'];\n    for (var i=0; i < data.length; i++) {\n        let market = data[i];\n        console.log(market['id']);\n        getDetail(market['id'])\n            .then(printData);\n    }\n}\n\nfunction printData(data) {\n    let text = JSON.stringify(data, null, 2);\n    document.getElementById('data').innerHTML += text;\n}\n\nfunction test() {\n    getLocal(80526)\n        // .then(printData)\n        .then((data) => {\n            printData(data['results']);\n            getAll(data);\n        })\n        .catch((err) => console.log(err));\n}\n\ntest();\n\n\n\n// WEBPACK FOOTER //\n// ./js/farmer.js"],"sourceRoot":""}