{"version":3,"sources":["webpack:///webpack/bootstrap 94050fa23fef18a18c2d","webpack:///./js/http-promise.js","webpack:///./js/farmer.js"],"names":["get","url","dataType","Promise","resolve","reject","$","ajax","type","async","statusCode","response","Error","error","jqXHR","status","getXMLHttpRequest","request","XMLHttpRequest","onreadystatechange","readyState","DONE","open","send","HttpClient","callback","responseText","console","log","http","getLocal","zip","getDetail","id","getAll","marketData","data","i","length","market","then","printData","text","JSON","stringify","document","getElementById","innerHTML","test","makeSummaries","catch","err","parent","className","numberOfMarkets","Math","min","summary","createElement","name","appendChild"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 94050fa23fef18a18c2d","// Implementation with jQuery\nexport const get = function(url, dataType='text') {\n    // return new pending promise\n    return new Promise((resolve, reject) => {\n        $.ajax({\n            url: url,\n            type: 'GET',\n            dataType: dataType,\n            async: true,\n            statusCode: {\n                404: (response) => reject(new Error('404 error - response: ' + response)),\n                200: (response) => resolve(response)\n            },\n            error: (jqXHR, status, error) => {\n                reject(new Error('Failed to load the thing - status ' + status));\n            }\n        });\n    });\n};\n\n\n// Implementation with XMLHttpRequest\nexport const getXMLHttpRequest = function(url) {\n    // return new pending promise\n    return new Promise((resolve, reject) => {\n        const request = new XMLHttpRequest();\n        request.onreadystatechange = () => {\n            if (request.readyState == XMLHttpRequest.DONE && request.status == 200) {\n                resolve(request.response);\n            } else if (request.readyState == XMLHttpRequest.DONE &&\n                       (request.status < 200 || request.status > 299)) {\n                reject(new Error('Failed to load page - status: ' + request.status));\n            }\n        };\n        request.open('GET', url);\n        request.send(null);\n    })\n};\n\n\n\nvar HttpClient = function() {\n    this.get = function(url, callback) {\n        let request = new XMLHttpRequest();\n        request.onreadystatechange = function() {\n            if (request.readyState == 4 && request.status == 200) {\n                callback(request.responseText);\n            } else {\n                console.log('--------- Error! ---------');\n                console.log(request);\n            }\n        }\n        request.open('GET', url, true);\n        request.send(null);\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/http-promise.js","import * as http from './http-promise';\n\nfunction getLocal(zip, callback) {\n    const url = \"http://search.ams.usda.gov/farmersmarkets/v1/data.svc/zipSearch?zip=\"\n    return http.get(url + zip, 'json');\n}\n\nfunction getDetail(id) {\n    const url = \"http://search.ams.usda.gov/farmersmarkets/v1/data.svc/mktDetail?id=\";\n    return http.get(url + id, 'json');\n}\n\nfunction getAll(marketData) {\n    let data = marketData['results'];\n    for (var i=0; i < data.length; i++) {\n        let market = data[i];\n        console.log(market['id']);\n        getDetail(market['id'])\n            .then(printData);\n    }\n}\n\nfunction printData(data) {\n    let text = JSON.stringify(data, null, 2);\n    document.getElementById('data').innerHTML += text;\n}\n\nfunction test() {\n    getLocal(80526)\n        .then((data) => makeSummaries(data['results'], document.getElementById('summary-wrapper')))\n        .catch((err) => console.log(err));\n}\n\nfunction makeSummaries(data, parent) {\n    const className = 'market-summary';\n    const numberOfMarkets = Math.min(data.length, 9);\n\n    for (var i=0; i < numberOfMarkets; i++) {\n        const market = data[i];\n\n        const summary = document.createElement('div');\n        summary.className = className;\n        const name = document.createElement('h3');\n        name.innerHTML = market['marketname'];\n\n        summary.appendChild(name);\n        parent.appendChild(summary);\n    }\n}\n\ntest();\n\n\n\n// WEBPACK FOOTER //\n// ./js/farmer.js"],"sourceRoot":""}