{"version":3,"sources":["webpack:///webpack/bootstrap 6dcd8a13c52cce166a9b","webpack:///./js/market-data.js","webpack:///./js/farmer.js","webpack:///./js/http-promise.js"],"names":["local","detail","allDetails","mapsLink","address","http","BASE_URL","zip","callback","url","get","id","marketData","i","length","market","getDetail","then","printData","link","encodeURI","join","api","addSummary","parent","summary","$","addClass","name","document","createElement","appendTo","text","innerHTML","console","log","append","makeSummaries","markets","numberToAdd","lastDisplayed","data","hasMore","removeClass","addTagToggle","tagText","tag","click","e","toggleClass","makeTags","init","undefined","empty","val","catch","err","ready","dataType","Promise","resolve","reject","ajax","type","async","statusCode","response","Error","error","jqXHR","status","getXMLHttpRequest","request","XMLHttpRequest","onreadystatechange","readyState","DONE","open","send","HttpClient","responseText"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6dcd8a13c52cce166a9b","//  Wrapper for calls to retreive market data\n\nimport * as http from './http-promise';\nconst BASE_URL = 'http://127.0.0.1:5000/yourmarket/api';\n\n// Return summary of markets near zip\nexport function local(zip, callback) {\n    const url = BASE_URL + '/zip/' + zip;\n    return http.get(url, 'json');\n}\n\n// get detailed information for a certain market ID\nexport function detail(id) {\n    const url = BASE_URL + '/id/' + id;\n    return http.get(url, 'json');\n}\n\n// get detailed information for a group of market summaries\nexport function allDetails(marketData) {\n    for (var i=0; i < marketData.length; i++) {\n        let market = marketData[i];\n        getDetail(market['id']).then(printData);\n    }\n}\n\n// Get Google Maps link from market detail data\nexport function mapsLink(market) {\n    const link = 'https://maps.google.com/?q=' +\n                 encodeURI(market['y'] + ',' + market['x'] +\n                           ' (\"' + market['MarketName'] + '\")');\n    return (link);\n}\n\n// return address of market\nexport function address(market) {\n    const address = [market['street'], market['city'], market['zip']].join(', ');\n    return (address);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/market-data.js","import * as api from './market-data.js';\n\n\nfunction addSummary(market, parent) {\n    const summary = $('<div/>').addClass('market-summary');\n\n    // Create header for element\n    const name = document.createElement('h3');\n    $('<span> ' + market['MarketName'] + '</span>').addClass('market-name').appendTo(name);\n\n    // make address linking to maps\n    const address = document.createElement('p');\n    const link = api.mapsLink(market);\n    const text = api.address(market);\n    address.innerHTML = '<a href=' + link + '>' + text + '</a>';\n\n    // update DOM\n    console.log('hi');\n    summary.append(name);\n    summary.append(address);\n    parent.append(summary);\n}\n\n\nfunction makeSummaries(markets, parent, numberToAdd) {\n    for (var i=markets.lastDisplayed;\n         i < markets.lastDisplayed + numberToAdd; i++) {\n        // if all the markets have been displayed, break\n        if (i > markets.data.length - 1) {\n            break;\n        }\n        addSummary(markets.data[i], parent);\n    }\n    markets.lastDisplayed = i;\n    if (markets.hasMore()) {\n        $('#more-results').removeClass('visible');\n    }\n}\n\n\nfunction addTagToggle(tagText, parent) {\n    const tag = $('<button>' + tagText + '</button>').addClass('tag-toggle');\n    tag.appendTo(parent);\n    tag.click((e) => {\n        tag.toggleClass('selected');\n    });\n}\n\nfunction makeTags(markets, parent) {\n    for (var i=0; i < markets.length; i++) {\n        addTagToggle(markets[i]['marketname'], parent);\n    }\n\n}\n\n\n\nfunction init() {\n    // Market data singleton\n    const markets = {\n        data: [],\n        lastDisplayed: 0,\n        // hasMore: true if there are more markets to display\n        hasMore: function () { // can't use arrow function due to 'this' binding\n            return (this.data != undefined && this.lastDisplayed < this.data.length);\n        },\n    };\n\n    // Listen for zip code search\n    $('#submit-search').click((e) => {\n        // clear old results\n        $('.market-summary-wrapper').empty();\n        markets.data = {};\n        markets.lastDisplayed = 0;\n\n        // generate new results\n        api.local($('#zipcode').val())\n            .then((data) => {\n                markets.data = data;\n                console.log(data);\n\n                // Display market data\n                makeSummaries(markets, $('#summary-wrapper'), 9);\n\n                // Display button to get more results\n                if (markets.hasMore()) {\n                    $('#more-results').addClass('visible');\n                    $('#more-results').click((e) => {\n                        makeSummaries(markets, $('#summary-wrapper'), 9);\n                    });\n                }\n\n                // Show tags to toggle/filter with\n                makeTags(markets, $('#tag-toggle-wrapper'));\n            })\n            .catch((err) => console.log(err));\n    });\n}\n\n$(document).ready(init);\n\n\n\n// WEBPACK FOOTER //\n// ./js/farmer.js","// Implementation with jQuery\nexport const get = function(url, dataType='text') {\n    // return new pending promise\n    return new Promise((resolve, reject) => {\n        $.ajax({\n            url: url,\n            type: 'GET',\n            dataType: dataType,\n            async: true,\n            statusCode: {\n                404: (response) => reject(new Error('404 error - response: ' + response)),\n                200: (response) => resolve(response)\n            },\n            error: (jqXHR, status, error) => {\n                reject(new Error('Failed to load the thing - status ' + status));\n            }\n        });\n    });\n};\n\n\n// Implementation with XMLHttpRequest\nexport const getXMLHttpRequest = function(url) {\n    // return new pending promise\n    return new Promise((resolve, reject) => {\n        const request = new XMLHttpRequest();\n        request.onreadystatechange = () => {\n            if (request.readyState == XMLHttpRequest.DONE && request.status == 200) {\n                resolve(request.response);\n            } else if (request.readyState == XMLHttpRequest.DONE &&\n                       (request.status < 200 || request.status > 299)) {\n                reject(new Error('Failed to load page - status: ' + request.status));\n            }\n        };\n        request.open('GET', url);\n        request.send(null);\n    })\n};\n\n\n\nvar HttpClient = function() {\n    this.get = function(url, callback) {\n        let request = new XMLHttpRequest();\n        request.onreadystatechange = function() {\n            if (request.readyState == 4 && request.status == 200) {\n                callback(request.responseText);\n            } else {\n                console.log('--------- Error! ---------');\n                console.log(request);\n            }\n        }\n        request.open('GET', url, true);\n        request.send(null);\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/http-promise.js"],"sourceRoot":""}